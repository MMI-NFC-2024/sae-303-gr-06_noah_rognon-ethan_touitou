---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import SectionTitle from "../components/SectionTitle.astro";
import GraphBlock from "../components/GraphBlock.astro";
import PlotFigure from "../components/PlotFigure.astro";
import {
  plotOptions1,
  plotOptions2,
  plotOptions3,
  plotOptions4,
} from "../data/plots";
---

<Layout
  title="Data Lab — Visualisations ferroviaires et touristiques"
  description="L’ensemble des visualisations du projet Tourisme en train : réseau, accessibilité culturelle, impact CO₂, offres TGVMax et projections 2035."
>
  <Header
    eyebrow="Data Lab"
    title="Toutes les visualisations au même endroit"
    description="Cartes, graphiques et expériences interactives pour explorer le tourisme en train sous toutes ses facettes. Téléchargez, comparez et inspirez-vous."
  >
    <a
      class="inline-flex items-center justify-center rounded-full border border-sncf/40 px-5 py-2 text-sm font-semibold text-sncf transition hover:border-sncf hover:text-forest"
      href="/"
    >
      Retour à l’histoire
    </a>
  </Header>

  <SectionTitle
    eyebrow="Cartes statiques"
    title="Visualisations Observable Plot"
    description="Ces cartes et graphiques sont calculés côté serveur via Observable Plot à partir des données open data mises à disposition par la SNCF, DataTourisme et l’ADEME."
  />

  <GraphBlock
    eyebrow="Réseau & culture"
    title="Les voies ferrées relient gares et lieux culturels"
    description="La densité du réseau SNCF rend les grandes salles comme les petits lieux associatifs accessibles. Les points rouges signalent les gares voyageurs, les points bleus les équipements culturels recensés."
    legend="Noir : lignes ferroviaires. Rouge : gares SNCF. Bleu : équipements culturels (archives, bibliothèques, théâtres, cinémas)."
  >
    <PlotFigure slot="default" options={plotOptions1} />
  </GraphBlock>

  <GraphBlock
    eyebrow="Impact carbone"
    title="Un trajet en train émet jusqu’à 20× moins de CO₂"
    description="Comparer les émissions moyennes par passager sur 500 km rend la bascule vers le rail tangible. L’avion reste la solution la plus carbonée pour les distances domestiques."
    legend="Lecture verticale : kilogrammes de CO₂ émis par passager pour 500 km selon le mode de transport."
  >
    <PlotFigure slot="default" options={plotOptions2} />
  </GraphBlock>

  <GraphBlock
    eyebrow="Culture accessible"
    title="Festivals à moins de 10 km d’une gare"
    description="Cette carte identifie les événements accessibles à pied, à vélo ou en navette légère depuis une gare SNCF. Elle éclaire les partenariats à tisser entre organisateurs et opérateurs de mobilité."
    legend="Vert : festival situé à ≤ 10 km d’une gare. Rouge : festival au-delà de 10 km. Gris : densité des gares voyageurs."
    reverse
  >
    <PlotFigure slot="default" options={plotOptions3} />
  </GraphBlock>

  <GraphBlock
    eyebrow="Économie & climat"
    title="Évolution du coût et du CO₂ économisé depuis 2010"
    description="Le train reste légèrement plus cher que la voiture au 100 km, mais le différentiel se réduit. La courbe verte estime le CO₂ évité en choisissant le rail."
    legend="Lignes pleines : coût moyen pour 100 km (train vs voiture). Pointillé vert : CO₂ économisé, en kg / 100 km."
  >
    <PlotFigure slot="default" options={plotOptions4} />
  </GraphBlock>

  <SectionTitle
    eyebrow="Interactions"
    title="Visualisations dynamiques"
    description="Ces expériences sont alimentées par des scripts dédiés. Utilisez filtres, sélecteurs et survols pour personnaliser vos analyses."
  />

  <GraphBlock
    eyebrow="Mobilité quotidienne"
    title="Comparaison du coût selon le mode de transport"
    description="Filtrez le graphique pour comparer le prix moyen au 100 km entre train et voiture par année. Les données mettent en évidence une convergence progressive."
  >
    <div class="space-y-4">
      <label class="text-sm font-semibold text-slate" for="filtreMode">
        Filtrer par mode :
      </label>
      <select
        id="filtreMode"
        class="w-full rounded-full border border-slate/20 bg-snow px-4 py-2 text-sm text-slate focus:border-sncf focus:outline-none focus:ring-2 focus:ring-sncf/40"
      >
        <option value="Tous">Tous</option>
        <option value="Train">Train</option>
        <option value="Voiture">Voiture</option>
      </select>
      <div id="graph-couts" class="min-h-[360px]"></div>
    </div>
    <script type="module" src="/scripts/evolution.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Promesse client"
    title="Avantages du train vs inconvénients de la voiture"
    description="Ce nuage de points compare perception et réalité : confort, empreinte carbone, sérénité d’un côté ; stress, pollution et dépendance à la voiture de l’autre."
    legend="Utilisez le filtre pour isoler les points à forte valeur narrative et construire votre argumentaire marketing."
    reverse
  >
    <div class="space-y-4">
      <label class="text-sm font-semibold text-slate" for="filtreAvantages">
        Filtrer par type :
      </label>
      <select
        id="filtreAvantages"
        class="w-full rounded-full border border-slate/20 bg-snow px-4 py-2 text-sm text-slate focus:border-sncf focus:outline-none focus:ring-2 focus:ring-sncf/40"
      >
        <option value="Tous">Tous</option>
        <option value="Avantage Train">Avantage Train</option>
        <option value="Inconvénient Voiture">Inconvénient Voiture</option>
      </select>
      <div id="graph-avantages" class="min-h-[360px]"></div>
    </div>
    <script type="module" src="/scripts/avantages.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Réservation"
    title="Disponibilité moyenne des offres TGVMax par axe"
    description="Visualisez les lignes où la demande dépasse l’offre. Les zones claires signalent des opportunités commerciales, les zones foncées des tensions de disponibilité."
  >
    <div id="graph-tgvmax" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/tgvmax.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Territoires à révéler"
    title="Accessibilité touristique autour des gares"
    description="Carte interactive des points d’intérêt accessibles depuis chaque gare. Croisez type de lieu et densité pour prioriser vos actions locales."
    reverse
  >
    <div id="graph-accessibilite" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/tourisme.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Part modale"
    title="Évolution des modes de transport en France"
    description="Le graphique retrace la progression du train, la baisse de la voiture particulière et la stabilité de l’avion. Il accompagne un récit macro des comportements de mobilité."
  >
    <div id="graph-partmodale" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/partModale.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Sobriété énergétique"
    title="Le train, champion du climat"
    description="Comparez les émissions par passager-kilomètre en 2024. Idéal pour un argumentaire de sensibilisation ou une campagne grand public."
    reverse
  >
    <div id="graph-trainco2" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/trainCO2.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Prospective"
    title="Mobilité 2035 : scénarios de transition modale"
    description="Cette projection modélise le report modal de 10 % des trajets voiture vers le train. Elle illustre l’impact potentiel sur la fréquentation et les émissions globales."
  >
    <div id="graph-mobilite2035" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/mobilite2035.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Destinations durables"
    title="Gares, lieux touristiques et festivals"
    description="Combinez filtres par catégorie culturelle ou discipline pour révéler des itinéraires inédits. L’outil met en avant les synergies entre rail et tourisme."
    reverse
  >
    <div id="graph-tourisme" class="min-h-[460px]"></div>
    <script type="module" src="/scripts/tourismeCarte.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Offre TGVMax"
    title="Taux de disponibilité TGVMax par axe"
    description="Analyses comparatives pour piloter la capacité : identifiez les axes saturés, les périodes de tension et les opportunités de renfort."
  >
    <div id="graph-tgvmax-axe" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/tgvmaxDispo.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Rayon d’exploration"
    title="Accessibilité touristique selon le rayon"
    description="Ajustez le rayon et le type de point d’intérêt pour mesurer le potentiel d’une gare. Outil précieux pour les offices de tourisme et collectivités."
    reverse
  >
    <div id="graph-accessibilite-rayon" class="min-h-[440px]"></div>
    <script type="module" src="/scripts/accessibilite-rayon.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Taux journalier"
    title="TGVMax : disponibilité jour par jour"
    description="Chaque cellule représente un axe et un jour. Les étoiles signalent un taux de disponibilité supérieur à 50 %, utile pour anticiper les pics."
  >
    <div id="ah" class="min-h-[420px]"></div>
    <script type="module" src="/scripts/disponibilite.js"></script>
  </GraphBlock>

  <GraphBlock
    eyebrow="Carte interactive"
    title="Réseau ferroviaire et équipements culturels"
    description="Activez les filtres pour afficher les gares, les lignes ou l’ensemble des données. Une navigation idéale pour illustrer le maillage territorial."
    reverse
  >
    <div class="space-y-4">
      <label class="text-sm font-semibold text-slate" for="filtre-carte">
        Filtrer l’affichage :
      </label>
      <select
        id="filtre-carte"
        class="w-full rounded-full border border-slate/20 bg-snow px-4 py-2 text-sm text-slate focus:border-sncf focus:outline-none focus:ring-2 focus:ring-sncf/40"
      >
        <option value="tous">Toutes les données</option>
        <option value="gares">Seulement les gares</option>
        <option value="lignes">Seulement les lignes</option>
      </select>
      <div id="graph-reseau-ferroviaire" class="min-h-[460px]"></div>
    </div>
    <script type="module" src="/scripts/reseau-ferroviaire.js"></script>
  </GraphBlock>
</Layout>
